<h3 class="search-header details-background">Product Details</h3>

<div class="search-header details-background container">

    <div class="row">

        <div class="col-sm-4">
            <p class="lead">{{ model.product.name }}</p>
            <div class="list-group table-responsive">
                <!--<a href="#" class="list-group-item active">Category 1</a>-->
                <!--<a href="#" class="list-group-item">Price {{product.salePrice}}</a>-->
                <!--<a href="#" class="list-group-item">Category 3</a>-->
                <table class="table table-striped">
                    <tr>
                        <th>Condition</th>
                        <td>{{model.product.condition}}</td>
                    </tr>
                    <tr>
                        <th>Manufacturer</th>
                        <td>{{model.product.manufacturer}}</td>
                    </tr>
                    <tr>
                        <th>Department</th>
                        <td>{{model.product.department}}</td>
                    </tr>
                    <tr>
                        <th>Price</th>
                        <td>{{model.product.salePrice}}</td>
                    </tr>
                    <tr>
                        <th>Manufacture</th>
                        <td>{{model.product.manufacturer}}</td>
                    </tr>
                    <tr>
                        <th>Class</th>
                        <td>{{model.product.class}}</td>
                    </tr>
                    <tr>
                        <th>Model Number</th>
                        <td>{{model.product.modelNumber}}</td>
                    </tr>
                    <tr>
                        <th>Warrany Labor</th>
                        <td>{{model.product.warrantyLabor}}</td>
                    </tr>
                    <tr>
                        <th>Warranty Parts</th>
                        <td>{{model.product.warrantyParts}}</td>
                    </tr>
                    <tr>
                        <th>Condition</th>
                        <td>{{model.product.condition}}</td>
                    </tr>
                    <tr>
                        <th>In Store Pickup ?</th>
                        <td>{{model.product.inStorePickup}}</td>
                    </tr>
                    <tr>
                        <th>Home Delivery ?</th>
                        <td>{{model.product.homeDelivery}}</td>
                    </tr>
                </table>

                <br><br>
                <!--{{ model.product}}-->

                <a style="text-decoration: none" ng-hide="model.isliked" href=""
                   ng-click="model.likeProd(model.product.sku)">
                    <p class="lead">Like this product? Let us know!</p>
                    <i title="Like" class="fa fa-thumbs-o-up fa-lg fa-2x"></i></a>
                <a style="text-decoration: none" ng-if="model.isliked" href=""
                   ng-click="model.undolikeProd(model.product.sku)">
                    <p class="lead">You have liked this product. Click below to dislike it!</p>
                    <i title="Unlike" class="fa fa-thumbs-o-down fa-lg fa-2x orangecolor"></i></a>

                <hr>



                <div class="row">
                    <div class="col-xs-8">
                        <p class="lead"> Average Rating!
                        <h3>{{ model.avgRating }}</h3>
                            <ng-rating ng-model="model.avgRating"
                                       editable="false">
                            </ng-rating>
                        </p>
                    </div>
                </div>




            </div>
        </div>

        <div class="col-sm-8">

            <div class="thumbnail">
                <img class="img-responsive" ng-src="{{model.product.image}}" alt="http://placehold.it/800x300">
                <div class="caption-full">
                    <h4 class="pull-right">{{model.product.salePrice}}</h4>
                    <h4><a href="">{{model.product.name }}</a>
                    </h4>
                    <p>{{model.product.longDescription}}</p>
                    <div class="ratings">
                        <p class="pull-right">Total Reviews: {{model.product.customerReviewCount}}</p>
                    </div>
                </div>
            </div>

            <div class="well" ng-show="model.reviewsData">
                <div class="text-right">
                    <a class="btn btn-success" onclick="showWriteReviewDiv()">Leave a Review</a>
                </div>

                <div id="writeReviewDiv" style="display:none;" class="panel-body">
                    <div class="row">
                        <div class="well margin-well">
                            <h4>What do you think about the product?</h4>
                            <form role="form" class="ng-pristine ng-valid">
                                <div star-rating ng-model="model.rating1" max="5" on-rating-select="model.rateFunction(rating)"></div>
                                <div class="form-group">
                                    <textarea ng-model="model.review.title" placeholder="Title" class="form-control"
                                              rows="1"></textarea>
                                </div>
                                <div class="form-group">
                                    <textarea ng-model="model.review.review" placeholder="Your Review" class="form-control"
                                              rows="3"></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary" id="submit" style="display:none;" onclick="hideWriteReviewDiv()" ng-click="model.addReview(model.review, model.rating1)"
                                        >Submit
                                </button>
                                <button type="submit" class="btn btn-warning" id="update" style="display:none;" onclick="hideWriteReviewDiv()" ng-click="model.updateReview(model.review)">Update
                                </button>

                                <button type="submit" class="btn btn-info" id="cancel" style="display:none;" href="" onclick="hideWriteReviewDivCancelLink()"
                                        ng-click="model.cancelReview($index)">
                                    Cancel
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <hr>
                <div ng-repeat="review in model.reviewsData">
                    <p><b>Reviewer: </b>{{review.username}}</p>
                    <div star-rating ng-model="review.rating" max="5" on-rating-select="model.rateFunction(rating)"></div>
                    <p><b>Title: </b>{{review.title}}</p>
                    <p><b>Comment: </b>{{review.review}}</p>
                    <p class="pull-right" style="color: #2b542c"><b>Created On: </b>{{review.createdOn | date : 'mediumDate'}}</p>
                    <!--<p class="pull-right" style="color: #2b542c"><b>Updated On: </b>{{review.updatedOn | date : 'mediumDate'}}</p>-->
                    <div ng-show="model.currentUser._id == review.userId">
                        <p><a id="edit" href="" onclick="showWriteReviewDivCancelLink()"
                              ng-click="model.selectedReview($index)"> Edit | </a>
                            <a href="" ng-click="model.deleteReview(review)">Delete</a>
                        </p>
                    </div>
                    <!--{{ vm.isfollowed}}-->
                    <div ng-hide="model.currentUser._id == review.userId">
                        <a style="text-decoration: none" ng-if="!(model.isFollowed1(review.userId,model.currentUser.following))" href="javascript:void(0);"
                           ng-click="model.followUser(review.userId)">
                            <p class="lead">Click below to follow this user!</p>
                            <i title="Follow" class="fa fa-user fa-lg fa-2x"></i></a>
                        <a style="text-decoration: none" ng-if="model.isFollowed1(review.userId,model.currentUser.following)" href="javascript:void(0);"
                           ng-click="model.undofollowUser(review.userId)">
                            <p class="lead">You have followed this user. Click below to un-follow!</p>
                            <i title="Un-Follow" class="fa fa-user fa-lg fa-2x orangecolor"></i></a>
                        <hr>
                    </div>
                    <hr>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $('.star-rating').raty({
        path: 'images/',
        score: function () {
            return $(this).attr('data-score');
        }
    });
    $('.star-rating-custom').raty({
        path: 'images/',
        score: function () {
            return $(this).attr('data-score');
        }
    });
    function showWriteReviewDiv() {
        document.getElementById('writeReviewDiv').style.display = "block";
        document.getElementById('submit').style.display = "inline";
    }
    function hideWriteReviewDiv() {
        document.getElementById('writeReviewDiv').style.display = "none";
    }
    function showWriteReviewDivCancelLink() {
        document.getElementById('writeReviewDiv').style.display = "block";
        document.getElementById('edit').style.display = "none";
        document.getElementById('cancel').style.display = "inline";
        document.getElementById('update').style.display = "inline";
    }

    function hideWriteReviewDivCancelLink() {
        document.getElementById('writeReviewDiv').style.display = "none";
        document.getElementById('edit').style.display = "inline";
        document.getElementById('cancel').style.display = "none";
    }


</script>
